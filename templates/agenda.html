{% extends 'base.html' %}

{% block navbar %}
<ul class="navbar-nav mr-auto">
    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('agenda') }}">Agenda</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('profile') }}">Perfil</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('logout') }}">Logout</a>
    </li>
    <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Cadastro
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="{{ url_for('especialidades') }}">Especialidades</a>
            <a class="dropdown-item" href="{{ url_for('listar_medicos') }}">Médicos</a>
            <a class="dropdown-item" href="{{ url_for('listar_salas') }}">Salas</a>
            <a class="dropdown-item" href="{{ url_for('listar_pacientes') }}">Pacientes</a>
        </div>
    </li>
</ul>
{% endblock %}

{% block content %}
<div class="container mt-5">
    <header>
        <h1>Bem-vindo à sua Agenda</h1>
    </header>
    <main>
        <div class="d-flex justify-content-between mb-3">
            <button id="btn-calendario" class="btn btn-primary">Calendário</button>
            <button id="btn-lista" class="btn btn-secondary">Lista</button>
        </div>
        <div id="calendario-container">
            <!-- Calendário deve ser implementado aqui -->
            <p>Verificação de Calendário aqui...</p>
        </div>
        <div id="lista-container" class="d-none">
            <h2>Lista de Compromissos</h2>
            {% if agendamentos %}
                <ul class="list-group">
                    {% for agendamento in agendamentos %}
                        <li class="list-group-item">
                            {{ agendamento.data }} {{ agendamento.hora }} -
                            Sala: {{ agendamento.sala }}, Médico: {{ agendamento.medico }}, Paciente: {{ agendamento.paciente }}
                            <a href="{{ url_for('editar_agendamento', id=agendamento.id) }}" class="btn btn-sm btn-warning">Editar</a>
                            <form action="{{ url_for('excluir_agendamento', id=agendamento.id) }}" method="POST" style="display:inline;">
                                <button type="submit" class="btn btn-sm btn-danger">Excluir</button>
                            </form>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>Você ainda não possui compromissos agendados.</p>
            {% endif %}
        </div>
    </main>
    <footer class="mt-5">
        <p>&copy; 2024. Todos os direitos reservados.</p>
    </footer>
</div>

<script>
document.getElementById('btn-calendario').addEventListener('click', function() {
    document.getElementById('calendario-container').classList.remove('d-none');
    document.getElementById('lista-container').classList.add('d-none');
});
document.getElementById('btn-lista').addEventListener('click', function() {
    document.getElementById('calendario-container').classList.add('d-none');
    document.getElementById('lista-container').classList.remove('d-none');
});
</script>
{% endblock %}
